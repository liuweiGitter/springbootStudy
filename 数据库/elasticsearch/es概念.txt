更多内容参考
es中文指南 https://es.xiaoleilu.com/

【分片和节点】
es集群中的每一个服务器为集群的一个节点
节点承担数据存储功能

数据分片为 TODO
https://www.jianshu.com/p/cc06f9adbe82

【索引、类型、文档和域】
关系型数据库：数据库 -> 表 -> 行 -> 列
Elasticsearch：索引index -> 类型type -> 文档document -> 域field

一个es集群中可以包含多个索引(indices)（数据库）
每一个索引可以包含多个类型(types)（表）
每一个类型可以包含多个文档(documents)（行）
每个文档可以包含多个字段(Fields)（列）

索引的概念有2种解释
作为名词，索引表示es的数据库概念
作为动词，在es中存储数据的行为叫做索引
	这又包含两层含义，1.将document放入index中，2.为每一个document建立倒排索引

es中还有一种和关系型数据库中索引概念一样的索引类型，即倒排索引inverted index
倒排索引即为某一个字段建立的索引
默认情况下，文档中的所有字段都会被索引（拥有一个倒排索引），只有这样他们才是可被搜索的

索引存储文档时，若原文档存在则覆盖

【聚合】
数据的按类型汇总，等同于但功能更甚于关系型数据库中的group by
支持多级聚合，即多层group by

【es大数据检索】
es为高性能的文档搜索引擎库，(打开方式正确时)支持大数据量的文档存储和快速检索
性能上，实测结果，简单文档结构(6字段)，10万条数据，模糊分页排序查询(每页1000条)，耗时在100ms以内
es本身在查询数据时响应速度很快，但2种常见情况，即大分页、大窗口查询会影响用户整体响应时间
用户的整体响应时间==请求服务连接时间+服务处理数据时间+服务响应数据时间
1.大分页
每页查询大量数据，es本身检索很快，响应堵点在跨mysql联合查询以及用户带宽
2.大窗口
所谓大窗口，指的是查询漂移窗口，即分页起始下标和结束下标组成的窗口
举例来说，查询第15000到16000条数据，窗口为15000-16000，此窗口即为大窗口
es普通查询默认支持的窗口为0-10000，超出此窗口会禁止查询
大窗口的查询用到es的另一种查询机制，即滚动检索scroll search
滚动检索类似mysql游标，可以支持大窗口查询，但这种查询不支持实时响应
游标的滚动非常耗时，es对此只提供"可用"功能，而非"好用"功能，这也是基于性能考虑
通常用户也只会分页查询前10000条数据，影响不大

一般情况下，即使每页查询大量数据，es本身检索也很快
响应堵点主要在跨mysql联合查询以及用户带宽上
以导出2万条数据为例
es查询用时可能只需要1000ms
但联合mysql补充字段可能还需要2000ms
excel写入需要2000ms
文件大小设为8MB，传输平均带宽设为500kBs，则传输需要超过16秒
浏览器解析文件500ms
则整个响应过程需要22秒左右

【es分词器特性】
分词器用于对文档字段分段索引存储
如字符串"1234我是谁elastic"，使用ik分词器smart分词会分为4个部分：1234 我 是谁 elastic
这对查询带来非常大的影响，es的高性能也是在牺牲了一定的准确性换来的
上述字符串，模糊查询，查询条件完全匹配分词时可以查出结果
但只要不是分词，可能就查不到结果
如，条件1234可以查到，是谁可以查到，但123查不到，谁查不到

在作为条件查询时，一定要注意分词界限
监控日志使用了es库，监控名称字段应用了ik分词器max_word
分词界限为数字、中文、英文单词或英文字符串




